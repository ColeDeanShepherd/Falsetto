@using Falsetto.Shared
@using Html;
@using static Html.HtmlHelpers.Elem;
@using static Html.HtmlHelpers.Attr;
@page "/"

<PageTitle>Index</PageTitle>

@((MarkupString)Div(Children: GuitarFretboards).ToHtml())

@code {
    private List<Html.Node> GuitarFretboards =
        Enumerable.Range(1, 11)
            .Map(Convert.ToUInt32)
            .Repeat(5)
            .FlatMap((fretNumbers, i) =>
                fretNumbers
                    .Map(fn => new GuitarNote(StringIndex: i, FretNumber: fn)))
            .FlatMap(note0 =>
            {
                GuitarNote note1 = new(StringIndex: 5, FretNumber: 6);

                return new[]
                {
                    P(Children: Nodes(Text(Guitar.GetSimpleIntervalName(note0, note1)))),
                    Guitar.GuitarFretboard(
                        new List<GuitarNote>()
                        {
                            note0,
                            note1,
                        })
                };
            })
            .ToList();
}